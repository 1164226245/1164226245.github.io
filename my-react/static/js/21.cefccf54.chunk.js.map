{"version":3,"sources":["scripts/views/collect/index.js","utils/index.js","utils/axios.js","scripts/components/head/index.js","../node_modules/_antd-mobile@2.3.1@antd-mobile/lib/button/style/css.js","../node_modules/_antd-mobile@2.3.1@antd-mobile/lib/button/index.js"],"names":["Collect","connect","cancelColl","console","log","axios","post","mobile","sessionStorage","goodsid","state","then","res","history","go","goodlist","get","params","setState","data","result","length","this","title","show","style","display","fontWeight","color","fontSize","map","item","index","className","key","to","tag","good","width","src","pic","lineHeight","marginTop","dtitle","slice","d_title","jiage","onClick","type","backgroundColor","borderRadius","height","textAlign","marginLeft","Component","createHashHistory","baseURL","token","fail","msg","hide","success","defaults","headers","common","interceptors","request","use","config","time","loading","error","offline","Promise","reject","response","code","push","Head","goBack","props","serach","tokenflage","mode","icon","onLeftClick","handelGoBack","rightContent","handelGoSearch","bind","marginRight","Pop","scan","login","Item","visible","selected","handleVisibleChange","onSelect","opt","value","showActionSheet","BUTTONS","showActionSheetWithOptions","options","cancelButtonIndex","destructiveButtonIndex","message","maskClosable","wrapProps","onTouchStart","e","preventDefault","buttonIndex","mask","overlayClassName","overlayStyle","overlay","alt","align","overflow","adjustY","adjustX","offset","onVisibleChange","require","Object","defineProperty","exports","_extends3","_interopRequireDefault","_defineProperty3","_classCallCheck3","_createClass3","_possibleConstructorReturn3","_inherits3","_classnames3","React","obj","__esModule","newObj","prototype","hasOwnProperty","call","_interopRequireWildcard","_rmcFeedback2","_icon2","__rest","s","t","p","indexOf","getOwnPropertySymbols","i","rxTwoCNChar","isTwoCNChar","test","isString","str","insertSpace","child","children","cloneElement","split","join","createElement","Button","_React$Component","__proto__","getPrototypeOf","apply","arguments","_classnames","_a","prefixCls","size","inline","disabled","activeStyle","activeClassName","restProps","iconType","wrapCls","kids","Children","iconEl","rawCls","cls","undefined","role","defaultProps","module"],"mappings":"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","file":"static/js/21.cefccf54.chunk.js","sourcesContent":["\r\nimport \"./index.scss\";\r\nimport React, { Component } from \"react\";\r\n\r\nimport { WingBlank, WhiteSpace, Accordion, List, Icon, PullToRefresh, NoticeBar, Button, Checkbox } from 'antd-mobile';\r\n\r\nimport Head from \"~/components/head\";\r\n\r\n//引入axios \r\nimport { axios } from \"&\";   //从util的index里面引入axios\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { history } from \"&\";\r\n\r\n@connect()\r\nclass Collect extends Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            goodlist: [],\r\n            goodsid: null\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        axios.get(\"/react/showcollect\", {\r\n            params: {\r\n                mobile: sessionStorage.mobile\r\n            }\r\n        }).then(res => {\r\n            console.log(res);\r\n            this.setState({\r\n                goodlist: res.data.result,\r\n                goodsid: res.data.result.length > 0 ? res.data.result[0].goodsid : \"\"\r\n            })\r\n        })\r\n    }\r\n    //取消收藏\r\n    cancelColl = () => {\r\n        console.log(\"999\");\r\n\r\n        axios.post(\"/react/cancelcollect\", {\r\n            mobile: sessionStorage.mobile,\r\n            goodsid: this.state.goodsid\r\n\r\n        }).then(res => {\r\n            console.log(res);\r\n        });\r\n        history.go(0);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            goodlist,\r\n            goodsid\r\n        } = this.state\r\n        console.log(this.state.goodlist);\r\n        // console.log(this.state.goodsid);\r\n        // console.log(this.props.match.params.goodsId);\r\n        console.log(goodlist)\r\n        return (\r\n\r\n            <div>\r\n                <Head title=\"收藏中心\" show={true} ></Head>\r\n                {/* <p>收藏页面</p>\r\n                 */}\r\n                <div style={{ display: goodlist.length > 0 ? 'none' : 'block' }}>\r\n                    <h2 style={{ fontWeight: \"500\", color: \"#FF6666\", fontSize: \".4rem\" }}> 您还没有收藏任何商品.. </h2>\r\n                </div>\r\n                {\r\n                    goodlist.map((item, index) => {\r\n                        return (\r\n\r\n                            <div className=\"tr\" key={index}>\r\n                                {/* {\r\n                                    (item.tag==1)&& <Link to={\"/listdetail/\" + item.good.goodsid + \"?title=\" + item.good.title} key={index}> <li style={{ width: \"24%\" }}><img src={item.good.pic} /></li>\r\n                                    </Link>\r\n                                } */}\r\n                                <Link to={((item.tag==0)? \"/detail/\" : \"/listdetail/\") + item.goodsid + \"?title=\" + item.good.title} key={index}> <li style={{ width: \"24%\" }}><img src={item.good.pic} /></li>\r\n                                </Link>\r\n\r\n\r\n                                <li style={{ width: \"38%\" }}>\r\n                                    <p style={{ lineHeight: \"18px\", marginTop: '36px' }}>{item.good.dtitle ? item.good.dtitle.slice(0, 14) : item.good.d_title.slice(0, 14)}\r\n                                    </p>\r\n                                    <p style={{ lineHeight: \"18px\" }}>￥{item.good.jiage + \"元\"}</p>\r\n\r\n                                </li>\r\n                                <li style={{ width: \"34%\" }}>\r\n                                    <Button\r\n                                        onClick={\r\n                                            this.cancelColl\r\n                                        }\r\n                                        type=\"ghost\" style={{\r\n                                            backgroundColor: \"#0099CC\",\r\n                                            color: \"#CCFF99\",\r\n                                            borderRadius: \"50%\",\r\n                                            width: \"1.0rem\",\r\n                                            height: \"1.0rem\",\r\n                                            lineHeight: \"1.0rem\",\r\n                                            textAlign: \"center\",\r\n                                            fontSize: \".2rem\",\r\n                                            marginTop: \".4rem\",\r\n                                            marginLeft: \"1rem\"\r\n                                        }}>取消收藏</Button>\r\n                                </li>\r\n                            </div>\r\n\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Collect","// es6  一个模块暴露多个接口\r\nimport url from \"url\";\r\n\r\nimport {createHashHistory} from \"history\";\r\n//再次暴露\r\n// export {msg} from \"./msg\";\r\n\r\nexport {config} from \"./config\";\r\n\r\n\r\n\r\nexport const commonCss={\r\n    init:{\r\n        padding:0,\r\n        margin:0\r\n    },\r\n    init1:{\r\n        color:\"red\",\r\n        boxShadow:\"1px 2px 3px 4px green\"\r\n    }\r\n}\r\n\r\nexport const commonEvent={\r\n    move(){\r\n    console.log(\"这是鼠标移动事件\")\r\n    },\r\n    touch(){\r\n        console.log(\"这是touch事件\")\r\n    }\r\n}\r\n\r\nexport {axios,baseURL} from \"./axios\";\r\n\r\n\r\n\r\nexport function getQuery(search){\r\n\r\n    return url.parse(search,true).query\r\n\r\n}\r\n//下面一句话相当于   history =this.PaymentResponse.history\r\nexport const history =new createHashHistory();\r\n\r\n","import axios from \"axios\";\r\nimport  {Toast} from 'antd-mobile';\r\nimport  {history}  from \"&\";\r\n// const baseURL=\"http://localhost:4321/\"; \r\nconst baseURL=\"http://47.105.44.9:4321/\"; \r\n\r\nlet token=\"\"\r\n// const baseURL=\"http://47.105.44.9:1234/\";   //http://localhost:1234/vue/movie\r\n// axios.defaults.baseURL = 'https://api.example.com';  //设置基路径\r\n axios.defaults.baseURL=baseURL;\r\n axios.defaults.headers.common['token'] =token;   //设置token AUTH_TOKEN  将token设置到请求头\r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';//将键值对的参数用&连接起来，如果有空格，将空格转换为+加号；有特殊符号，将特殊符号转换为ASCII HEX值\r\n\r\nexport  function loadingToast(msg,time) {\r\n    msg=msg||\"正在请求\";\r\n    time=time||1;\r\n    Toast.hide();  //先清空\r\n    Toast.loading(msg, time, () => {\r\n        // console.log('加载完成 !!!');\r\n      });\r\n  }\r\n\r\n//失败\r\n export function fail(msg) {\r\n    Toast.hide();  //先清空\r\n    Toast.fail(msg, 1);\r\n  } \r\n//网络原因\r\n  export function offline(msg) {\r\n    Toast.offline(msg, 1);\r\n  }\r\n\r\n//  请求成功\r\nexport  function success(msg) {\r\n    Toast.success(msg, 1);\r\n  }\r\n  \r\n//请求之前拦截   //interceptors拦截器  \r\naxios.interceptors.request.use(function (config) {\r\n    // Do something before request is sent 在发送请求之前做些什么\r\n    // console.log(\"进入请求之前拦截\");\r\n     // 配置动画\r\n     loadingToast();\r\n      token=sessionStorage.token?sessionStorage.token:\"\";\r\n    //  //设置请求头\r\n      config.headers['token']=token;  \r\n      //前端 得到 token 会把这个 token (存储到sessionStorage ) 配置 请求头 里面 request.headers.token = token  \r\n\r\n     return config;\r\n  }, function (error) {\r\n    // Do something with request error  处理请求错误\r\n    offline(\"请求失败,网络异常\")\r\n    return Promise.reject(error);\r\n  });\r\n\r\n//请求之后响应拦截\r\n  axios.interceptors.response.use(function (response) {\r\n    // Do something with response data    对响应数据做些什么\r\n    // console.log(\"进入请求之后拦截\");\r\n    console.log(response);\r\n    if(response.data.code==\"3000\"){\r\n       //  router.push({name:'login',query:{active:'login'}})\r\n       history.push(\"/login\");\r\n  }\r\n     // type  不存在    success\r\n    // type = 0  fail\r\n    // type = 1  success \r\n    //设置不同请求type类型下的数据\r\n    if(!!response.data.type){\r\n      success(response.data.msg);\r\n    }else{\r\n      if(response.data.type==0){\r\n        fail(response.data.msg);\r\n      }else{\r\n        success(response.data.msg);\r\n      }\r\n      \r\n    }\r\n    return response;\r\n  }, function (error) {\r\n    // Do something with response error   //处理响应错误\r\n    fail(\"响应失败,服务异常\")\r\n    return Promise.reject(error);\r\n  });\r\n\r\n  export {axios,baseURL} //模块暴露\r\n","import \"./index.scss\";\r\n//NavBar 导航栏\r\n//头部组件 Head\r\nimport React, { Component } from \"react\";\r\n//ActionSheet 动作面板\r\n//从底部弹出的模态框，提供和当前场景相关的 2 个以上的操作动作，也支持提供标题和描述。内置固定的展示样式、不支持特别灵活的修改。\r\n//Popover气泡\r\nimport { Popover, NavBar, Icon,ActionSheet } from 'antd-mobile';\r\n\r\nimport { history } from \"&\";\r\n\r\nexport default class Head extends Component {\r\n\r\n    //自定义函数\r\n    handelGoBack(show) {\r\n        if (show) {\r\n            // history.go(-1);\r\n            history.goBack();\r\n        }\r\n\r\n    }\r\n   \r\n    //跳搜索\r\n    handelGoSearch() {\r\n        history.push(\"/search\");  //去搜索\r\n    }\r\n    render() {\r\n        const {\r\n            title,\r\n            show,\r\n            serach\r\n        } = this.props\r\n        // console.log(this.props);\r\n        // console.log(sessionStorage.token);\r\n        var tokenflage=sessionStorage.token;\r\n        // console.log(tokenflage);\r\n        // console.log(this.history);\r\n        return (\r\n            <NavBar\r\n                mode=\"light\"\r\n                className=\"navbar\"\r\n                icon={show && <Icon type=\"left\" />}\r\n                // 主要是返回\r\n                onLeftClick={() => this.handelGoBack(show)}\r\n\r\n                rightContent={[\r\n                    !serach && <Icon onClick={this.handelGoSearch.bind(this)} key=\"0\" type=\"search\" style={{ marginRight: '16px' }} />,\r\n                    !tokenflage&&<Pop scan={this.props.scan} login={this.props.login } key={1} />,\r\n                ]}\r\n            >{title}</NavBar>\r\n        )\r\n    }\r\n}\r\n\r\nconst Item = Popover.Item;\r\nconst myImg = src => <img src={`https://gw.alipayobjects.com/zos/rmsportal/${src}.svg`} className=\"am-icon am-icon-xs\" alt=\"\" />;\r\n\r\nclass Pop extends  Component {\r\n    state = {\r\n        visible: false,\r\n        selected: '',\r\n    };\r\n    handleVisibleChange=(visible)=>{\r\n        this.setState({\r\n            visible\r\n        })\r\n\r\n    }\r\n    //气泡里面选择跳转的函数\r\n    onSelect = (opt) => {\r\n        // console.log(opt.props.value);\r\n        this.setState({\r\n          visible: false,\r\n          selected: opt.props.value,\r\n        });\r\n\r\n        if(opt.props.value==\"login\"){\r\n            history.push(\"/login\");\r\n        }else if(opt.props.value==\"scan\"){\r\n            history.push(\"/scan\");\r\n        }else{\r\n            this.showActionSheet();\r\n        }\r\n    }\r\n    showActionSheet = () => {\r\n        const BUTTONS = ['拍照', '从手机相册选择', '使用相机拍照', '删除', '取消'];\r\n        ActionSheet.showActionSheetWithOptions({\r\n          options: BUTTONS,\r\n          cancelButtonIndex: BUTTONS.length - 1,\r\n          destructiveButtonIndex: BUTTONS.length - 2,\r\n          // title: 'title',\r\n          message: '请注意查看',\r\n          maskClosable: true,\r\n          'data-seed': 'logId',\r\n          wrapProps:{\r\n            onTouchStart: e => e.preventDefault(),\r\n          }\r\n        },\r\n        (buttonIndex) => {\r\n          console.log(buttonIndex)\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            scan,\r\n            login\r\n        }=this.props\r\n        return (\r\n            <Popover mask\r\n                overlayClassName=\"fortest\"\r\n                overlayStyle={{ color: 'currentColor' }}\r\n                visible={this.state.visible}\r\n                overlay={[\r\n                    // (!scan&&<Item key=\"4\" value=\"scan\" icon={myImg('tOtXhkIWzwotgGSeptou')} data-seed=\"logId\">扫一扫</Item>),\r\n                    // (<Item key=\"5\" value=\"photo\" icon={myImg('PKAgAqZWJVNwKsAJSmXd')} style={{ whiteSpace: 'nowrap' }}>拍照</Item>),\r\n                    (!login&&<Item key=\"6\" value=\"login\" icon={myImg('uQIYTFeRrjPELImDRrPt')}>\r\n                        <span style={{ marginRight: 5 }}>登录</span>\r\n                    </Item>),\r\n                ]}\r\n                align={{\r\n                    overflow: { adjustY: 0, adjustX: 0 },\r\n                    offset: [-10, 0],\r\n                }}\r\n                onVisibleChange={this.handleVisibleChange}\r\n                onSelect={this.onSelect}\r\n            >\r\n                \r\n                    <Icon type=\"ellipsis\" />\r\n               \r\n            </Popover>\r\n        )\r\n    }\r\n}\r\n","'use strict';\n\nrequire('../../style/css');\n\nrequire('../../icon/style/css');\n\nrequire('./index.css');","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _classnames2 = require('classnames');\n\nvar _classnames3 = _interopRequireDefault(_classnames2);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nvar _rmcFeedback = require('rmc-feedback');\n\nvar _rmcFeedback2 = _interopRequireDefault(_rmcFeedback);\n\nvar _icon = require('../icon');\n\nvar _icon2 = _interopRequireDefault(_icon);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar __rest = undefined && undefined.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    }return t;\n};\n\nvar rxTwoCNChar = /^[\\u4e00-\\u9fa5]{2}$/;\nvar isTwoCNChar = rxTwoCNChar.test.bind(rxTwoCNChar);\nfunction isString(str) {\n    return typeof str === 'string';\n}\n// Insert one space between two chinese characters automatically.\nfunction insertSpace(child) {\n    if (isString(child.type) && isTwoCNChar(child.props.children)) {\n        return React.cloneElement(child, {}, child.props.children.split('').join(' '));\n    }\n    if (isString(child)) {\n        if (isTwoCNChar(child)) {\n            child = child.split('').join(' ');\n        }\n        return React.createElement(\n            'span',\n            null,\n            child\n        );\n    }\n    return child;\n}\n\nvar Button = function (_React$Component) {\n    (0, _inherits3['default'])(Button, _React$Component);\n\n    function Button() {\n        (0, _classCallCheck3['default'])(this, Button);\n        return (0, _possibleConstructorReturn3['default'])(this, (Button.__proto__ || Object.getPrototypeOf(Button)).apply(this, arguments));\n    }\n\n    (0, _createClass3['default'])(Button, [{\n        key: 'render',\n        value: function render() {\n            var _classnames;\n\n            var _a = this.props,\n                children = _a.children,\n                className = _a.className,\n                prefixCls = _a.prefixCls,\n                type = _a.type,\n                size = _a.size,\n                inline = _a.inline,\n                disabled = _a.disabled,\n                icon = _a.icon,\n                loading = _a.loading,\n                activeStyle = _a.activeStyle,\n                activeClassName = _a.activeClassName,\n                onClick = _a.onClick,\n                restProps = __rest(_a, [\"children\", \"className\", \"prefixCls\", \"type\", \"size\", \"inline\", \"disabled\", \"icon\", \"loading\", \"activeStyle\", \"activeClassName\", \"onClick\"]);\n            var iconType = loading ? 'loading' : icon;\n            var wrapCls = (0, _classnames3['default'])(prefixCls, className, (_classnames = {}, (0, _defineProperty3['default'])(_classnames, prefixCls + '-primary', type === 'primary'), (0, _defineProperty3['default'])(_classnames, prefixCls + '-ghost', type === 'ghost'), (0, _defineProperty3['default'])(_classnames, prefixCls + '-warning', type === 'warning'), (0, _defineProperty3['default'])(_classnames, prefixCls + '-small', size === 'small'), (0, _defineProperty3['default'])(_classnames, prefixCls + '-inline', inline), (0, _defineProperty3['default'])(_classnames, prefixCls + '-disabled', disabled), (0, _defineProperty3['default'])(_classnames, prefixCls + '-loading', loading), (0, _defineProperty3['default'])(_classnames, prefixCls + '-icon', !!iconType), _classnames));\n            var kids = React.Children.map(children, insertSpace);\n            var iconEl = void 0;\n            if (typeof iconType === 'string') {\n                iconEl = React.createElement(_icon2['default'], { 'aria-hidden': 'true', type: iconType, size: size === 'small' ? 'xxs' : 'md', className: prefixCls + '-icon' });\n            } else if (iconType) {\n                var rawCls = iconType.props && iconType.props.className;\n                var cls = (0, _classnames3['default'])('am-icon', prefixCls + '-icon', size === 'small' ? 'am-icon-xxs' : 'am-icon-md');\n                iconEl = React.cloneElement(iconType, {\n                    className: rawCls ? rawCls + ' ' + cls : cls\n                });\n            }\n            // use div, button native is buggy @yiminghe\n            return React.createElement(\n                _rmcFeedback2['default']\n                // tslint:disable-next-line:jsx-no-multiline-js\n                ,\n                { activeClassName: activeClassName || (activeStyle ? prefixCls + '-active' : undefined), disabled: disabled, activeStyle: activeStyle },\n                React.createElement(\n                    'a',\n                    (0, _extends3['default'])({ role: 'button', className: wrapCls }, restProps, { onClick: disabled ? undefined : onClick, 'aria-disabled': disabled }),\n                    iconEl,\n                    kids\n                )\n            );\n        }\n    }]);\n    return Button;\n}(React.Component);\n\nButton.defaultProps = {\n    prefixCls: 'am-button',\n    size: 'large',\n    inline: false,\n    disabled: false,\n    loading: false,\n    activeStyle: {}\n};\nexports['default'] = Button;\nmodule.exports = exports['default'];"],"sourceRoot":""}