(this["webpackJsonpmy-react-project"]=this["webpackJsonpmy-react-project"]||[]).push([[27],{382:function(e,t,a){},410:function(e,t){},495:function(e,t,a){"use strict";a.r(t);var n=a(13),s=a(14),o=a(16),c=a(15),r=a(17),i=a(0),l=a.n(i),u=(a(382),a(68)),m=a(383)("http://47.105.44.9:4321"),d=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={friendList:[],chatList:[],userName:"",addInfo:[],myclose:!1,fclose:!1},a}return Object(r.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.prompt("\u8bf7\u8f93\u5165\u6635\u79f0");t||(t=Date.now()),this.setState({userName:t}),m.emit("message",{type:"online",name:t,time:(new Date).toLocaleString()}),m.on("broadcast",(function(t){e.setState({friendList:t.friends})})),m.on("ON_LINE",(function(t){var a=e.state.addInfo;a.push(t),e.setState({addInfo:a})})),m.on("CLOSE",(function(t){var a=e.state.addInfo;a.push(t),e.setState({addInfo:a})})),m.on("CONTENT",(function(t){var a=e.state.chatList;a.push({user:t.user,txt:t.txt}),e.setState({chatList:a})})),m.on("disconnect",(function(){e.setState({fclose:!0})}))}},{key:"send",value:function(){if(this.state.myclose)return!1;var e=this.refs.textbox.value;this.refs.textbox.value="",m.emit("message",{type:"content",content:e});var t=this.state.chatList;t.push({user:this.state.userName,txt:e}),this.setState({chatList:t})}},{key:"closeWindow",value:function(){window.confirm("\u786e\u8ba4\u8981\u9000\u51fa\u5417\uff1f")&&(m.disconnect(),this.setState({myclose:!0}))}},{key:"render",value:function(){var e=this.state,t=e.chatList,a=e.userName,n=e.addInfo,s=e.myclose,o=e.friendList,c=e.fclose;return l.a.createElement("div",{className:"App"},l.a.createElement(u.a,{title:"\u804a\u5929\u5ba4",show:!0}),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"head"},"\u4eb2,\u4f60\u6765\u4e86,\u6709\u4ec0\u4e48\u53ef\u4ee5\u5e2e\u52a9\u4f60\u7684"),l.a.createElement("div",{id:"friends-box"},l.a.createElement("p",null,"\u7fa4\u6210\u5458 ",l.a.createElement("span",null,o.length)),l.a.createElement("ul",{id:"friend-list"},o.map((function(e,t){return l.a.createElement("li",{key:t},l.a.createElement("em",null),l.a.createElement("span",{className:e===a?"my":""},e))})))),l.a.createElement("div",{id:"record-box",ref:"record"},n.map((function(e,t){return l.a.createElement("div",{className:"addInfo",key:t},e.time,"   ",e.txt)})),t.map((function(e,t){return e.user==a?l.a.createElement("div",{className:"right-div move-mine2",key:t,ref:"chatitem"},l.a.createElement("em",{className:"photo right-photo"}),l.a.createElement("span",{className:"name right-name"},e.user),l.a.createElement("span",{className:"say right-say"},e.txt)):l.a.createElement("div",{className:"left-div",key:t,ref:"chatitem"},l.a.createElement("em",{className:"photo left-photo"}),l.a.createElement("span",{className:"name left-name"},e.user),l.a.createElement("span",{className:"say left-say"},e.txt))})),s?l.a.createElement("div",{className:"addInfo"},"\u4f60\u5df2\u9000\u51fa\u7fa4\u804a\uff0c\u6536\u4e0d\u5230\u597d\u53cb\u7684\u6d88\u606f\u5566"):"",c?l.a.createElement("div",{className:"addInfo"},"\u670d\u52a1\u5668\u65ad\u5f00\u5566"):""),l.a.createElement("div",{id:"send-box"},l.a.createElement("textarea",{rows:"8",cols:"80",ref:"textbox"}),l.a.createElement("div",{className:"btn"},l.a.createElement("button",{type:"button",name:"close",onClick:this.closeWindow.bind(this)},"\u5173\u95ed"),l.a.createElement("button",{type:"button",name:"send",onClick:this.send.bind(this)},"\u53d1\u9001")))))}}]),t}(i.Component);t.default=d},62:function(e,t,a){"use strict";a(86);var n=a(6),s=a(65);a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return s.a})),a.d(t,"b",(function(){return s.b}));var o=new n.b},65:function(e,t,a){"use strict";a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return i}));a(77);var n=a(78),s=a.n(n),o=a(69),c=a.n(o);a.d(t,"a",(function(){return c.a}));var r=a(62),i="http://47.105.44.9:4321/",l="";function u(e){s.a.hide(),s.a.fail(e,1)}function m(e){s.a.success(e,1)}c.a.defaults.baseURL=i,c.a.defaults.headers.common.token=l,c.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",c.a.interceptors.request.use((function(e){var t,a;return t=t||"\u6b63\u5728\u8bf7\u6c42",a=a||1,s.a.hide(),s.a.loading(t,a,(function(){})),l=sessionStorage.token?sessionStorage.token:"",e.headers.token=l,e}),(function(e){var t;return t="\u8bf7\u6c42\u5931\u8d25,\u7f51\u7edc\u5f02\u5e38",s.a.offline(t,1),Promise.reject(e)})),c.a.interceptors.response.use((function(e){return console.log(e),"3000"==e.data.code&&r.c.push("/login"),e.data.type?m(e.data.msg):0==e.data.type?u(e.data.msg):m(e.data.msg),e}),(function(e){return u("\u54cd\u5e94\u5931\u8d25,\u670d\u52a1\u5f02\u5e38"),Promise.reject(e)}))},68:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));a(80);var n=a(81),s=a.n(n),o=(a(82),a(83)),c=a.n(o),r=(a(84),a(85)),i=a.n(r),l=(a(71),a(72)),u=a.n(l),m=a(13),d=a(14),h=a(16),f=a(15),p=a(17),v=(a(70),a(0)),b=a.n(v),y=a(62),g=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"handelGoBack",value:function(e){e&&y.c.goBack()}},{key:"handelGoSearch",value:function(){y.c.push("/search")}},{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.show,s=t.serach,o=sessionStorage.token;return b.a.createElement(i.a,{mode:"light",className:"navbar",icon:n&&b.a.createElement(u.a,{type:"left"}),onLeftClick:function(){return e.handelGoBack(n)},rightContent:[!s&&b.a.createElement(u.a,{onClick:this.handelGoSearch.bind(this),key:"0",type:"search",style:{marginRight:"16px"}}),!o&&b.a.createElement(k,{scan:this.props.scan,login:this.props.login,key:1})]},a)}}]),t}(v.Component),E=c.a.Item,k=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).state={visible:!1,selected:""},a.handleVisibleChange=function(e){a.setState({visible:e})},a.onSelect=function(e){a.setState({visible:!1,selected:e.props.value}),"login"==e.props.value?y.c.push("/login"):"scan"==e.props.value?y.c.push("/scan"):a.showActionSheet()},a.showActionSheet=function(){var e=["\u62cd\u7167","\u4ece\u624b\u673a\u76f8\u518c\u9009\u62e9","\u4f7f\u7528\u76f8\u673a\u62cd\u7167","\u5220\u9664","\u53d6\u6d88"];s.a.showActionSheetWithOptions({options:e,cancelButtonIndex:e.length-1,destructiveButtonIndex:e.length-2,message:"\u8bf7\u6ce8\u610f\u67e5\u770b",maskClosable:!0,"data-seed":"logId",wrapProps:{onTouchStart:function(e){return e.preventDefault()}}},(function(e){console.log(e)}))},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t=this.props,a=(t.scan,t.login);return b.a.createElement(c.a,{mask:!0,overlayClassName:"fortest",overlayStyle:{color:"currentColor"},visible:this.state.visible,overlay:[!a&&b.a.createElement(E,{key:"6",value:"login",icon:(e="uQIYTFeRrjPELImDRrPt",b.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/".concat(e,".svg"),className:"am-icon am-icon-xs",alt:""}))},b.a.createElement("span",{style:{marginRight:5}},"\u767b\u5f55"))],align:{overflow:{adjustY:0,adjustX:0},offset:[-10,0]},onVisibleChange:this.handleVisibleChange,onSelect:this.onSelect},b.a.createElement(u.a,{type:"ellipsis"}))}}]),t}(v.Component)},70:function(e,t,a){}}]);
//# sourceMappingURL=27.8a26f708.chunk.js.map