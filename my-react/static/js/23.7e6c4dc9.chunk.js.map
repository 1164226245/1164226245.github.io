{"version":3,"sources":["scripts/views/detail/index.js","utils/index.js","utils/axios.js","scripts/components/head/index.js","scripts/actions/index.js"],"names":["alert","showAlert","that","alertInstance","text","onPress","console","log","style","history","push","setTimeout","close","Detail","connect","state","detail","getIn","mobile","gotoshoppingcar","props","changeCount","val","setState","count","collect","axios","post","good","goodsid","match","params","goodsId","tag","then","res","gotoComment","addShoppingCar","this","get","data","result","dispatch","getMobile","url","location","item","title","URLSearchParams","search","slice","color","show","className","size","Header","extra","jiage","dtitle","Body","width","height","src","pic","alt","Footer","content","backgroundColor","borderRadius","lineHeight","textAlign","marginLeft","onClick","minWidth","showNumber","min","value","onChange","type","to","Component","createHashHistory","baseURL","token","fail","msg","hide","success","defaults","headers","common","interceptors","request","use","config","time","loading","sessionStorage","error","offline","Promise","reject","response","code","Head","goBack","serach","tokenflage","mode","icon","onLeftClick","handelGoBack","rightContent","handelGoSearch","bind","key","marginRight","Pop","scan","login","Item","visible","selected","handleVisibleChange","onSelect","opt","showActionSheet","BUTTONS","showActionSheetWithOptions","options","cancelButtonIndex","length","destructiveButtonIndex","message","maskClosable","wrapProps","onTouchStart","e","preventDefault","buttonIndex","mask","overlayClassName","overlayStyle","overlay","align","overflow","adjustY","adjustX","offset","onVisibleChange","getBanner","a","async","cb","payload","changeUser","getMiddleBanner","getBrandbanner","getSmallbanner","getNoticebar","getIndexList","getGoodsType","getGoodsList","getSearchDetail","ChangeGoodListReverse","ChangeIndexListReverse","ChangeSerchListReverse"],"mappings":"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","file":"static/js/23.7e6c4dc9.chunk.js","sourcesContent":["import \"./index.scss\";\r\nimport React, { Component } from \"react\";\r\n\r\nimport { Modal, Toast, Stepper, Card, WingBlank, WhiteSpace, Accordion, List, Icon, PullToRefresh, NoticeBar, Button } from 'antd-mobile';\r\n\r\n//Accordion 手风情\r\n\r\n//引入head组件\r\nimport Head from \"~/components/head\";\r\n\r\n//引入axios \r\nimport { axios } from \"&\";   //从util的index里面引入axios\r\n\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { getIndexDetail, getMobile, } from \"../../actions\";\r\nimport { history } from \"&\";\r\n\r\nconst alert = Modal.alert;\r\nconst showAlert = (that) => {\r\n    const alertInstance = alert('提示', '您即将去购物车页面', [\r\n        { text: '取消', onPress: () => console.log(\"取消跳转\"), style: 'default' },\r\n        { text: '确认', onPress: () => history.push(\"/main/shopcar\") },\r\n    ]);\r\n    setTimeout(() => {\r\n        // 可以调用close方法以在外部close\r\n        console.log('auto close');\r\n        alertInstance.close();\r\n    }, 500000);\r\n};\r\n//将ui组件转换为容器组件\r\n@connect(\r\n    (state) => {\r\n        return {\r\n            detail: state.getIn(['data', 'detail']),\r\n            mobile: state.getIn(['user', 'mobile']),\r\n            gotoshoppingcar: state.getIn(['data', 'gotoshoppingcar'])\r\n        }\r\n    }\r\n)\r\nclass Detail extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            good: {\r\n\r\n            },\r\n            goodsId: \"\",\r\n            count: 1\r\n        }\r\n    }\r\n    changeCount = (val) => {\r\n        this.setState({\r\n            count: val\r\n        })\r\n    }\r\n    collect = () => {\r\n        //发送请求并接收\r\n        axios.post(\"/react/collect\", {\r\n            good: this.state.good,\r\n            goodsid: this.props.match.params.goodsId,\r\n            tag: 0\r\n        }).then(res => {\r\n            // console.log(res);\r\n        })\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        //拿数据  后端http://localhost:4321/react/home/indexlist/detail?goodsId=611159083948\r\n        //前端http://localhost:4321/react/home/indexlist/detail?goodId=607135924302\r\n        const goodsId = this.props.match.params.goodsId;\r\n    \r\n        axios.get(\"/react/home/indexlist/detail\", {\r\n            params: {\r\n                goodsId\r\n            }\r\n        }).then(res => {\r\n            this.setState({\r\n                good: res.data.result\r\n            })\r\n\r\n        })\r\n\r\n        //拿手机号\r\n        if (!this.props.mobile) {\r\n            this.props.dispatch(getMobile({\r\n                url: \"/react/getMobile\"\r\n            }))\r\n        }\r\n\r\n    }\r\n    //去评论页面\r\n    gotoComment = () => {\r\n        //comment\r\n        history.push(\"/comment\");\r\n    }\r\n    //跳入购物车:\r\n    addShoppingCar = () => {\r\n        axios.post(\"/react/addshoppingcar\", {\r\n            count: this.state.count,\r\n            good: this.state.good,\r\n            goodsid: this.props.match.params.goodsId\r\n\r\n        }).then(res => {\r\n            console.log(res);\r\n        })\r\n    }\r\n    render() {\r\n        const {\r\n            item,\r\n            match,\r\n            location,\r\n            detail,\r\n            dispatch,\r\n            mobile,\r\n            gotoshoppingcar,\r\n\r\n        } = this.props;\r\n        // console.log(this.props);\r\n\r\n        const {\r\n            good\r\n        } = this.state\r\n        console.log(this.state.good);\r\n        return (\r\n            <div>\r\n                <Head title={new URLSearchParams(location.search).get('title').slice(0, 12)}\r\n                    style={{ color: \"#ffffff\" }} show={true} ></Head>\r\n\r\n                <div className=\"detailbox\">\r\n\r\n                    <WingBlank size=\"lg\">\r\n                        <WhiteSpace size=\"lg\" />\r\n                        <Card>\r\n                            <Card.Header\r\n                                extra={<span>劵后RMB: ¥{good.jiage}</span>}\r\n                                title={good.dtitle}\r\n                            >\r\n                            </Card.Header>\r\n                            <Card.Body>\r\n                                <p>{good.title}</p>\r\n                                <div><img style={{ width: \"100%\", height: \"4rem\" }} src={good.pic} alt=\"\" /></div>\r\n                            </Card.Body>\r\n                            <Card.Footer\r\n                                content=\"好货\"\r\n                                extra={<div style={{\r\n                                    backgroundColor: \"red\",\r\n                                    color: \"#CCFF99\", borderRadius: \"50%\",\r\n                                    width: \"0.8rem\", height: \"0.8rem\",\r\n                                    lineHeight: \"0.8rem\", textAlign: \"center\",\r\n                                    marginLeft: \"2rem\"\r\n                                }}\r\n                                    onClick={this.collect}>收藏</div>} />\r\n                        </Card>\r\n                        <WhiteSpace size=\"lg\" />\r\n                        <div>\r\n                            购买数量:\r\n                            <Stepper\r\n                                style={{ width: '50%', minWidth: '100px' }}\r\n                                showNumber\r\n                                min={1}\r\n                                value={this.state.count}\r\n                                onChange={this.changeCount}\r\n                            />\r\n                        </div>\r\n\r\n                        <Button type=\"primary\"\r\n                            style={{ backgroundColor: \"#CCFF99\", color: \"#FF6666\" }}\r\n                            size=\"large\"\r\n                            onClick={this.addShoppingCar}\r\n                        >\r\n                            加入购物车\r\n                        </Button>\r\n                        <WhiteSpace size=\"lg\" />\r\n                        <Button type=\"warning\" size=\"large\" onClick={showAlert}>立即购买</Button>\r\n                        <WhiteSpace size=\"lg\" />\r\n                        <Link to={\"/comment/\" + good.goodsId + \"?title=\" + good.title}> \r\n                            <Button\r\n                                type=\"ghost\" size=\"large\" style={{ backgroundColor: \"#0099CC\", color: \"#FF0033\" }} >商品评论</Button>\r\n                        </Link>\r\n                        {/* <Button\r\n                            onClick={this.gotoComment}\r\n                            type=\"ghost\" size=\"large\" style={{ backgroundColor: \"#0099CC\", color: \"#FF0033\" }} >商品评论</Button> */}\r\n                    </WingBlank>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n//下面暴露\r\nexport default Detail","// es6  一个模块暴露多个接口\r\nimport url from \"url\";\r\n\r\nimport {createHashHistory} from \"history\";\r\n//再次暴露\r\n// export {msg} from \"./msg\";\r\n\r\nexport {config} from \"./config\";\r\n\r\n\r\n\r\nexport const commonCss={\r\n    init:{\r\n        padding:0,\r\n        margin:0\r\n    },\r\n    init1:{\r\n        color:\"red\",\r\n        boxShadow:\"1px 2px 3px 4px green\"\r\n    }\r\n}\r\n\r\nexport const commonEvent={\r\n    move(){\r\n    console.log(\"这是鼠标移动事件\")\r\n    },\r\n    touch(){\r\n        console.log(\"这是touch事件\")\r\n    }\r\n}\r\n\r\nexport {axios,baseURL} from \"./axios\";\r\n\r\n\r\n\r\nexport function getQuery(search){\r\n\r\n    return url.parse(search,true).query\r\n\r\n}\r\n//下面一句话相当于   history =this.PaymentResponse.history\r\nexport const history =new createHashHistory();\r\n\r\n","import axios from \"axios\";\r\nimport  {Toast} from 'antd-mobile';\r\nimport  {history}  from \"&\";\r\n// const baseURL=\"http://localhost:4321/\"; \r\nconst baseURL=\"http://47.105.44.9:4321/\"; \r\n\r\nlet token=\"\"\r\n// const baseURL=\"http://47.105.44.9:1234/\";   //http://localhost:1234/vue/movie\r\n// axios.defaults.baseURL = 'https://api.example.com';  //设置基路径\r\n axios.defaults.baseURL=baseURL;\r\n axios.defaults.headers.common['token'] =token;   //设置token AUTH_TOKEN  将token设置到请求头\r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';//将键值对的参数用&连接起来，如果有空格，将空格转换为+加号；有特殊符号，将特殊符号转换为ASCII HEX值\r\n\r\nexport  function loadingToast(msg,time) {\r\n    msg=msg||\"正在请求\";\r\n    time=time||1;\r\n    Toast.hide();  //先清空\r\n    Toast.loading(msg, time, () => {\r\n        // console.log('加载完成 !!!');\r\n      });\r\n  }\r\n\r\n//失败\r\n export function fail(msg) {\r\n    Toast.hide();  //先清空\r\n    Toast.fail(msg, 1);\r\n  } \r\n//网络原因\r\n  export function offline(msg) {\r\n    Toast.offline(msg, 1);\r\n  }\r\n\r\n//  请求成功\r\nexport  function success(msg) {\r\n    Toast.success(msg, 1);\r\n  }\r\n  \r\n//请求之前拦截   //interceptors拦截器  \r\naxios.interceptors.request.use(function (config) {\r\n    // Do something before request is sent 在发送请求之前做些什么\r\n    // console.log(\"进入请求之前拦截\");\r\n     // 配置动画\r\n     loadingToast();\r\n      token=sessionStorage.token?sessionStorage.token:\"\";\r\n    //  //设置请求头\r\n      config.headers['token']=token;  \r\n      //前端 得到 token 会把这个 token (存储到sessionStorage ) 配置 请求头 里面 request.headers.token = token  \r\n\r\n     return config;\r\n  }, function (error) {\r\n    // Do something with request error  处理请求错误\r\n    offline(\"请求失败,网络异常\")\r\n    return Promise.reject(error);\r\n  });\r\n\r\n//请求之后响应拦截\r\n  axios.interceptors.response.use(function (response) {\r\n    // Do something with response data    对响应数据做些什么\r\n    // console.log(\"进入请求之后拦截\");\r\n    console.log(response);\r\n    if(response.data.code==\"3000\"){\r\n       //  router.push({name:'login',query:{active:'login'}})\r\n       history.push(\"/login\");\r\n  }\r\n     // type  不存在    success\r\n    // type = 0  fail\r\n    // type = 1  success \r\n    //设置不同请求type类型下的数据\r\n    if(!!response.data.type){\r\n      success(response.data.msg);\r\n    }else{\r\n      if(response.data.type==0){\r\n        fail(response.data.msg);\r\n      }else{\r\n        success(response.data.msg);\r\n      }\r\n      \r\n    }\r\n    return response;\r\n  }, function (error) {\r\n    // Do something with response error   //处理响应错误\r\n    fail(\"响应失败,服务异常\")\r\n    return Promise.reject(error);\r\n  });\r\n\r\n  export {axios,baseURL} //模块暴露\r\n","import \"./index.scss\";\r\n//NavBar 导航栏\r\n//头部组件 Head\r\nimport React, { Component } from \"react\";\r\n//ActionSheet 动作面板\r\n//从底部弹出的模态框，提供和当前场景相关的 2 个以上的操作动作，也支持提供标题和描述。内置固定的展示样式、不支持特别灵活的修改。\r\n//Popover气泡\r\nimport { Popover, NavBar, Icon,ActionSheet } from 'antd-mobile';\r\n\r\nimport { history } from \"&\";\r\n\r\nexport default class Head extends Component {\r\n\r\n    //自定义函数\r\n    handelGoBack(show) {\r\n        if (show) {\r\n            // history.go(-1);\r\n            history.goBack();\r\n        }\r\n\r\n    }\r\n   \r\n    //跳搜索\r\n    handelGoSearch() {\r\n        history.push(\"/search\");  //去搜索\r\n    }\r\n    render() {\r\n        const {\r\n            title,\r\n            show,\r\n            serach\r\n        } = this.props\r\n        // console.log(this.props);\r\n        // console.log(sessionStorage.token);\r\n        var tokenflage=sessionStorage.token;\r\n        // console.log(tokenflage);\r\n        // console.log(this.history);\r\n        return (\r\n            <NavBar\r\n                mode=\"light\"\r\n                className=\"navbar\"\r\n                icon={show && <Icon type=\"left\" />}\r\n                // 主要是返回\r\n                onLeftClick={() => this.handelGoBack(show)}\r\n\r\n                rightContent={[\r\n                    !serach && <Icon onClick={this.handelGoSearch.bind(this)} key=\"0\" type=\"search\" style={{ marginRight: '16px' }} />,\r\n                    !tokenflage&&<Pop scan={this.props.scan} login={this.props.login } key={1} />,\r\n                ]}\r\n            >{title}</NavBar>\r\n        )\r\n    }\r\n}\r\n\r\nconst Item = Popover.Item;\r\nconst myImg = src => <img src={`https://gw.alipayobjects.com/zos/rmsportal/${src}.svg`} className=\"am-icon am-icon-xs\" alt=\"\" />;\r\n\r\nclass Pop extends  Component {\r\n    state = {\r\n        visible: false,\r\n        selected: '',\r\n    };\r\n    handleVisibleChange=(visible)=>{\r\n        this.setState({\r\n            visible\r\n        })\r\n\r\n    }\r\n    //气泡里面选择跳转的函数\r\n    onSelect = (opt) => {\r\n        // console.log(opt.props.value);\r\n        this.setState({\r\n          visible: false,\r\n          selected: opt.props.value,\r\n        });\r\n\r\n        if(opt.props.value==\"login\"){\r\n            history.push(\"/login\");\r\n        }else if(opt.props.value==\"scan\"){\r\n            history.push(\"/scan\");\r\n        }else{\r\n            this.showActionSheet();\r\n        }\r\n    }\r\n    showActionSheet = () => {\r\n        const BUTTONS = ['拍照', '从手机相册选择', '使用相机拍照', '删除', '取消'];\r\n        ActionSheet.showActionSheetWithOptions({\r\n          options: BUTTONS,\r\n          cancelButtonIndex: BUTTONS.length - 1,\r\n          destructiveButtonIndex: BUTTONS.length - 2,\r\n          // title: 'title',\r\n          message: '请注意查看',\r\n          maskClosable: true,\r\n          'data-seed': 'logId',\r\n          wrapProps:{\r\n            onTouchStart: e => e.preventDefault(),\r\n          }\r\n        },\r\n        (buttonIndex) => {\r\n          console.log(buttonIndex)\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            scan,\r\n            login\r\n        }=this.props\r\n        return (\r\n            <Popover mask\r\n                overlayClassName=\"fortest\"\r\n                overlayStyle={{ color: 'currentColor' }}\r\n                visible={this.state.visible}\r\n                overlay={[\r\n                    // (!scan&&<Item key=\"4\" value=\"scan\" icon={myImg('tOtXhkIWzwotgGSeptou')} data-seed=\"logId\">扫一扫</Item>),\r\n                    // (<Item key=\"5\" value=\"photo\" icon={myImg('PKAgAqZWJVNwKsAJSmXd')} style={{ whiteSpace: 'nowrap' }}>拍照</Item>),\r\n                    (!login&&<Item key=\"6\" value=\"login\" icon={myImg('uQIYTFeRrjPELImDRrPt')}>\r\n                        <span style={{ marginRight: 5 }}>登录</span>\r\n                    </Item>),\r\n                ]}\r\n                align={{\r\n                    overflow: { adjustY: 0, adjustX: 0 },\r\n                    offset: [-10, 0],\r\n                }}\r\n                onVisibleChange={this.handleVisibleChange}\r\n                onSelect={this.onSelect}\r\n            >\r\n                \r\n                    <Icon type=\"ellipsis\" />\r\n               \r\n            </Popover>\r\n        )\r\n    }\r\n}\r\n","import {axios} from \"&\";\r\n\r\n\r\n//得到首页轮播图的异步数据\r\nexport async function getBanner({url,cb}){\r\n    const res= await axios.get(url)\r\n    return{\r\n        type:\"getBanner\",\r\n        payload:res.data.result\r\n    }\r\n} \r\n//得到手机号\r\nexport async function getMobile({url}){\r\n    const res= await axios.post(url)\r\n    return{\r\n        type:\"changeUser\",\r\n        payload:{\r\n          mobile:  res.data.result\r\n        }\r\n    }\r\n} \r\n//得到用户的数据\r\nexport  const changeUser=(payload)=>{\r\n      return{\r\n          type:\"changeUser\",\r\n          payload\r\n      }\r\n}\r\n//得到首页中间轮播图的异步数据\r\nexport async function getMiddleBanner({url,cb}){\r\n    const res= await axios.get(url)\r\n    return{\r\n        type:\"getMiddleBanner\",\r\n        payload:res.data.result\r\n    }\r\n} \r\n//获取品牌热卖图标\r\nexport async function getBrandbanner({url,cb}){\r\n    const res=await axios.get(url);\r\n\r\n    return {\r\n        type:\"getBrandbanner\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n//获取中间小图标\r\nexport async function getSmallbanner({url,cb}){\r\n    const res =await axios.get(url);\r\n    return {\r\n        type:\"getSmallbanner\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n//获取noticebar\r\nexport async function getNoticebar({url,cb}){\r\n    const res =await axios.get(url);\r\n    return {\r\n        type:\"getNoticebar\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n//获取首页列表  http://localhost:4321/react/home/indexlist\r\nexport async function getIndexList({url,cb}){\r\n    const res =await axios.get(url);\r\n    return {\r\n        type:\"getIndexList\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n//获取首页列表的详情页\r\nexport async function getIndexDetail({url,params}){\r\n    const res =await axios.get(url,{params});\r\n    return {\r\n        type:\"getIndexDetail\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\n//商品类型\r\nexport async function getGoodsType({url,params}){\r\n    const res =await axios.get(url,{params});\r\n    return {\r\n        type:\"getGoodsType\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n//商品列表\r\nexport async function getGoodsList({url,params}){\r\n    const res =await axios.get(url,{params});\r\n    return {\r\n        type:\"getGoodsList\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\n//得到列表页的详情\r\nexport async function getListDetail({url,params}){\r\n    const res =await axios.get(url,{params});\r\n    return {\r\n        type:\"getListDetail\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n//根据长标题短标题以及描述拿到搜索结果\r\nexport async function getSearchDetail({url,params}){\r\n    const res =await axios.get(url,{params});\r\n    // console.log(params);\r\n    return{\r\n        type:\"getSearchDetail\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\n//点击按钮加入购物车\r\n\r\nexport async function addShoppingCar({url,params}){\r\n    const res =await axios.get(url,{params});\r\n    console.log(params);\r\n    return {\r\n        type:\"addShoppingCar\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\n//显示购物车商品信息\r\nexport async function showShoppingCarInfo({url,params}){\r\n    const res=await axios.get(url,{params});\r\n    console.log(params);\r\n\r\n    return {\r\n        type:\"showShoppingCarInfo\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\n//反转商品列表页数据实现下拉刷新\r\nexport  function ChangeGoodListReverse(){\r\n     return {\r\n         type:\"ChangeGoodListReverse\"\r\n     }\r\n}\r\n//反转数据结构实现首页的列表页下拉刷新\r\nexport function ChangeIndexListReverse(){\r\n    return {\r\n        type:\"ChangeIndexListReverse\"\r\n    }\r\n}\r\n//反转搜索列表页的数据结构实现前端页面的前端刷新\r\nexport function ChangeSerchListReverse(){\r\n    return {\r\n        type:\"ChangeSerchListReverse\"\r\n    }\r\n}\r\n\r\n"],"sourceRoot":""}