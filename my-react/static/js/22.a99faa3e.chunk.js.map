{"version":3,"sources":["scripts/mobx/commots.js","scripts/views/evaluate/index.js","utils/index.js","utils/axios.js","scripts/components/head/index.js","scripts/mobx/address.js"],"names":["comment","observable","action","url","a","async","axios","get","res","commotsList","data","result","console","log","defaultAddressList","mobile","id","post","then","checked","addressList","map","item","_id","addresobj","content","Comment","observer","deloneCom","history","go","updateOneCom","push","state","good","goodsId","comments","this","props","match","params","sessionStorage","setState","location","detail","dispatch","gotoshoppingcar","title","style","color","show","className","size","fontSize","fontWeight","display","index","key","position","width","moment","time","format","inline","type","backgroundColor","top","right","onClick","Component","createHashHistory","baseURL","token","fail","msg","hide","success","defaults","headers","common","interceptors","request","use","config","loading","error","offline","Promise","reject","response","code","Head","goBack","serach","tokenflage","mode","icon","onLeftClick","handelGoBack","rightContent","handelGoSearch","bind","marginRight","Pop","scan","login","Item","visible","selected","handleVisibleChange","onSelect","opt","value","showActionSheet","BUTTONS","showActionSheetWithOptions","options","cancelButtonIndex","length","destructiveButtonIndex","message","maskClosable","wrapProps","onTouchStart","e","preventDefault","buttonIndex","src","mask","overlayClassName","overlayStyle","overlay","alt","align","overflow","adjustY","adjustX","offset","onVisibleChange","address"],"mappings":"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","file":"static/js/22.a99faa3e.chunk.js","sourcesContent":["//地址增删改\r\n//引入mobx的主文件  并进行相关验证\r\nimport { observable, action, computed, } from \"mobx\";\r\n\r\nimport { axios } from \"&\";\r\nimport Item from \"antd-mobile/lib/popover/Item\";\r\n\r\nclass comment {\r\n    @observable commotsList = []    //评论列表\r\n\r\n    @observable defaultAddressList = {}   //默认的地址\r\n\r\n    //action执行动作  得到评论列表\r\n    @action getCommotsList = async (url) => {\r\n        const res = await axios.get(url);\r\n        this.commotsList = res.data.result;\r\n    }\r\n    //得到一个默认地址\r\n    @action getDefaultAddrList = async (url) => {\r\n        const res = await axios.get(url);\r\n        console.log(res.data.result);\r\n        // console.log(res.data.result.addresobj.checked);\r\n        this.defaultAddressList = res.data.result;\r\n    }\r\n    //修改地址\r\n    //新增地址\r\n    //删除地址\r\n    // @action  deleteOneAddr=()=>{\r\n    //     axios.post(\"/react/deleteoneaddress\").then(res=>{\r\n    //         this.addressList=this.addressList.filter(item=>item._id);\r\n    //     })\r\n    // }\r\n\r\n    @action deleteOneAddr = (mobile, id) => {\r\n        axios.post(\"/react/deleteoneaddress\", {\r\n            mobile,\r\n            id\r\n        }).then(res => {\r\n            console.log(res);\r\n        })\r\n    }\r\n\r\n    //设置默认地址  选中弹框后就是默认地址\r\n    @action setDefaultAddre = (mobile, id, checked) => {\r\n        axios.post(\"/react/defaultChecked\", {\r\n            mobile,\r\n            id,\r\n            checked\r\n        }).then(res => {\r\n            // this.addressList=this.addressList.map((item)=>{\r\n            //     // if(item._id==id){\r\n            //     //     console.log(\"999\")\r\n            //     //     item.checked=true\r\n            //     //     // return item.checked;\r\n            //     // }else{\r\n            //     //     console.log(\"888\");\r\n            //     //     item.checked=false\r\n            //     // }\r\n            //     // return item\r\n\r\n\r\n            // })  \r\n            this.addressList = res.data.result\r\n        })\r\n    }\r\n    //原来的\r\n    // @action setDefaultAddre =(mobile,id)=>{\r\n    //     axios.post(\"/react/defaultChecked\",{\r\n    //         mobile,\r\n    //         id\r\n    //     }).then(res=>{\r\n    //         this.addressList=this.addressList.map((item)=>{\r\n    //             if(item._id==id){\r\n    //                 item.checked=true\r\n    //             }else{\r\n    //                 item.checked=false\r\n    //             }\r\n    //             return item;\r\n    //         })  \r\n    //     })\r\n    // }\r\n    //取消设置默认地址\r\n    @action calcelDefault = (mobile, id, checked) => {\r\n        axios.post(\"/react/canceldefault\", {\r\n            mobile,\r\n            id,\r\n            checked\r\n        }).then(res => {\r\n            this.addressList = this.addressList.map((item) => {\r\n                if (item._id == id) {\r\n                    if (checked === true) {\r\n                        item.checked = false;\r\n                    } else {\r\n                        item.checked = true;\r\n                    }\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n    }\r\n    //修改地址\r\n    // @action modifyaddress = (mobile, id, province, town, district, specific) => {\r\n    //     axios.post(\"/react/modifyaddress\", {\r\n    //         mobile,\r\n    //         id,\r\n    //         province,\r\n    //         town,\r\n    //         district,\r\n    //         specific\r\n    //     }).then(res => {\r\n    //         console.log(res);\r\n    //     })\r\n    // }\r\n    //修改评价  也就就是追评\r\n    @action modifyaddress = (mobile, id, addresobj) => {\r\n        axios.post(\"/react/modifyaddress\", {\r\n            mobile,\r\n            id,\r\n            addresobj\r\n           \r\n        }).then(res => {\r\n            console.log(res);\r\n        })\r\n    }\r\n\r\n     //修改评价  也就就是追评\r\n     @action modifyCommots=(mobile,id,content)=>{\r\n         axios.post(\"/react/updateOneCommots\",{\r\n             mobile,\r\n             id,\r\n             content\r\n         }).then(res=>{\r\n             console.log(res);\r\n         })\r\n     }\r\n    //数据监听\r\n    // @computed  \r\n}\r\n\r\n\r\nexport default new comment();   //","import \"./index.scss\";\r\nimport React, { Component } from \"react\";\r\nimport moment from 'moment'\r\n\r\nimport { WingBlank, WhiteSpace, Picker, Accordion, List, Icon, PullToRefresh, NoticeBar, Button, Checkbox, InputItem, Flex, Card, TextareaItem } from 'antd-mobile';\r\n\r\nimport Head from \"~/components/head\";\r\n//引入axios \r\nimport { axios } from \"&\";   //从util的index里面引入axios\r\nimport { Link } from \"react-router-dom\";\r\nimport address from \"~/mobx/address\";\r\nimport comment from \"~/mobx/commots\";    //评论的mobx\r\nimport { observer } from \"mobx-react\";\r\nimport { history } from \"&\";\r\nimport { success } from \"&/axios\";\r\n\r\n@observer\r\nclass Comment extends Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            good: {\r\n\r\n            },\r\n            goodsId: \"\",\r\n            comments: []\r\n        }\r\n    }\r\n\r\n    //删除评论\r\n    deloneCom = (mobile, id) => {\r\n        axios.post(\"/react/delCommots\", {\r\n            mobile: mobile,\r\n            id: id\r\n        }).then(res => {\r\n            console.log(res);\r\n        })\r\n        history.go(0)\r\n    }\r\n    //追加评论\r\n    updateOneCom=(mobile,id,content)=>{\r\n        // axios.post(\"/react/updateOneCommots\",{\r\n        //     mobile:mobile,\r\n        //     id:id,\r\n        //     content:this.commentRef.state.value\r\n        // }).then(res=>{\r\n        //     console.log(res);\r\n\r\n        // })\r\n        // history.push(\"./modifyaddress?id=\"+id)\r\n        history.push(\"./addeval?id=\"+id);\r\n\r\n    }\r\n    componentDidMount() {\r\n        //渲染商品\r\n        const goodsId = this.props.match.params.goodsId;\r\n        console.log(goodsId);\r\n        //渲染该用户评论列表   /showCommotsBymoblie\r\n        axios.get(\"/react/showCommotsBymoblie\", {\r\n            params: {\r\n                mobile: sessionStorage.mobile\r\n            }\r\n        }).then(res => {\r\n            console.log(res);\r\n            this.setState({\r\n                comments: res.data.result\r\n            })\r\n        })\r\n    }\r\n    //新增评论\r\n    // //添加评论\r\n    // editCommots = () => {\r\n    //     if (this.commentRef.state.value == \" \") {\r\n    //         success(\"注意:评论不能为空\")\r\n    //     }\r\n    //     console.log(this.state.good.title);\r\n    //     axios.post(\"/react/addCommots\", {\r\n    //         mobile: sessionStorage.mobile,\r\n    //         goodsId: this.props.match.params.goodsId,\r\n    //         title: this.state.good.title,\r\n    //         content: this.commentRef.state.value,\r\n\r\n    //     }).then(res => {\r\n    //         console.log(res);\r\n    //     })\r\n    //     history.go(0);\r\n\r\n    // }\r\n\r\n    render() {\r\n        const {\r\n            item,\r\n            match,\r\n            location,\r\n            detail,\r\n            dispatch,\r\n            mobile,\r\n            gotoshoppingcar,\r\n\r\n        } = this.props;\r\n        const {\r\n            good,\r\n            comments\r\n\r\n        } = this.state\r\n        console.log(this.state.good);\r\n        console.log(this.state.comments);\r\n        // const {\r\n        //     commotsList,\r\n        // } = comment\r\n        // console.log(commotsList);\r\n        return (\r\n            <div>\r\n                <Head title=\"我的评价中心\"\r\n                    style={{ color: \"#ffffff\" }} show={true} ></Head>\r\n                <div className=\"detailbox\">\r\n                    <WingBlank size=\"lg\">\r\n                        <WhiteSpace size=\"lg\" />\r\n                        <div className=\"comtitle\"\r\n                        style={{\r\n                            fontSize:\".4rem\",\r\n                            fontWeight:\"600\"\r\n                        }}\r\n                        >我的评价:</div>\r\n                        <div className=\"comments\" style={{ display: !!comments ? \"block\" : \"none\" }}>\r\n                            {\r\n                                comments.map((item, index) => {\r\n                                    return (\r\n                                        <ul key={index}>\r\n                                              <WhiteSpace size=\"lg\" />\r\n                                            <li style={{\r\n                                                position:\"relative\"\r\n                                            }}>\r\n                                                <div>\r\n                                                    <p\r\n                                                     style={{\r\n                                                        fontWeight:\"400\",\r\n                                                        fontSize:\".3rem\",\r\n                                                        width:\"70%\"\r\n                                                    }}\r\n                                                    >{\"商品名称:\"+item.title}</p>\r\n                                <p>{item._id}</p>\r\n                                                    <p\r\n                                                     style={{\r\n                                                         fontWeight:\"400\",\r\n                                                         fontSize:\".3rem\"\r\n                                                     }}\r\n                                                    >{item.content}</p>\r\n                                                    <p\r\n                                                     style={{\r\n                                                        fontWeight:\"400\",\r\n                                                        fontSize:\".3rem\"\r\n                                                    }}\r\n                                                    >{moment(item.time).format('YYYY-MM-DD HH:mm:ss')}</p>\r\n                                                </div>\r\n\r\n                                                <Button\r\n                                                    inline \r\n                                                    type=\"primary\"\r\n                                                    size=\"small\"\r\n\r\n                                                    style={{\r\n                                                        backgroundColor: \"#CC0033\",\r\n                                                        color: \"#fff\",\r\n                                                        position:\"absolute\",\r\n                                                        top:\".1rem\",\r\n                                                        right:\".2rem\"\r\n                                                    }}\r\n                                                    onClick={() => this.deloneCom(sessionStorage.mobile, item._id)}\r\n                                                >删除评价</Button>\r\n                                                  <Button\r\n                                                    inline \r\n                                                    type=\"primary\"\r\n                                                    size=\"small\"\r\n\r\n                                                    style={{\r\n                                                        backgroundColor: \"#0066CC\",\r\n                                                        color: \"#fff\",\r\n                                                        position:\"absolute\",\r\n                                                        top:\".7rem\",\r\n                                                        right:\".2rem\"\r\n                                                    }}\r\n                                                    onClick={() => this.updateOneCom(sessionStorage.mobile, item._id,item.content)}\r\n                                                    // onClick={this.goto}\r\n                                                >追加评价</Button>\r\n\r\n\r\n                                            </li>\r\n                                            <WhiteSpace size=\"lg\" />\r\n                                        </ul>\r\n                                    )\r\n                                })\r\n                            }\r\n                        </div>\r\n                        <div className=\"sh\" style={{ display: !!comments ? \"none\" : \"block\" }}>\r\n                            <p>暂无评论...</p>\r\n                        </div>\r\n                        <WhiteSpace size=\"lg\" />\r\n                        {/* <TextareaItem\r\n                            placeholder=\"您可以追加评价了\"\r\n                            ref={el => this.commentRef = el}\r\n                            onChange={this.editP}\r\n                            autoHeight\r\n                        >\r\n                        </TextareaItem> */}\r\n                        <WhiteSpace size=\"lg\" />\r\n                        {/* <Button\r\n                            onClick={this.editCommots}\r\n                            type=\"ghost\" size=\"large\" style={{ backgroundColor: \"#990033\", color: \"#FFF\" }} >提交评论</Button> */}\r\n                    </WingBlank>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Comment","// es6  一个模块暴露多个接口\r\nimport url from \"url\";\r\n\r\nimport {createHashHistory} from \"history\";\r\n//再次暴露\r\n// export {msg} from \"./msg\";\r\n\r\nexport {config} from \"./config\";\r\n\r\n\r\n\r\nexport const commonCss={\r\n    init:{\r\n        padding:0,\r\n        margin:0\r\n    },\r\n    init1:{\r\n        color:\"red\",\r\n        boxShadow:\"1px 2px 3px 4px green\"\r\n    }\r\n}\r\n\r\nexport const commonEvent={\r\n    move(){\r\n    console.log(\"这是鼠标移动事件\")\r\n    },\r\n    touch(){\r\n        console.log(\"这是touch事件\")\r\n    }\r\n}\r\n\r\nexport {axios,baseURL} from \"./axios\";\r\n\r\n\r\n\r\nexport function getQuery(search){\r\n\r\n    return url.parse(search,true).query\r\n\r\n}\r\n//下面一句话相当于   history =this.PaymentResponse.history\r\nexport const history =new createHashHistory();\r\n\r\n","import axios from \"axios\";\r\nimport  {Toast} from 'antd-mobile';\r\nimport  {history}  from \"&\";\r\n// const baseURL=\"http://localhost:4321/\"; \r\nconst baseURL=\"http://47.105.44.9:4321/\"; \r\n\r\nlet token=\"\"\r\n// const baseURL=\"http://47.105.44.9:1234/\";   //http://localhost:1234/vue/movie\r\n// axios.defaults.baseURL = 'https://api.example.com';  //设置基路径\r\n axios.defaults.baseURL=baseURL;\r\n axios.defaults.headers.common['token'] =token;   //设置token AUTH_TOKEN  将token设置到请求头\r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';//将键值对的参数用&连接起来，如果有空格，将空格转换为+加号；有特殊符号，将特殊符号转换为ASCII HEX值\r\n\r\nexport  function loadingToast(msg,time) {\r\n    msg=msg||\"正在请求\";\r\n    time=time||1;\r\n    Toast.hide();  //先清空\r\n    Toast.loading(msg, time, () => {\r\n        // console.log('加载完成 !!!');\r\n      });\r\n  }\r\n\r\n//失败\r\n export function fail(msg) {\r\n    Toast.hide();  //先清空\r\n    Toast.fail(msg, 1);\r\n  } \r\n//网络原因\r\n  export function offline(msg) {\r\n    Toast.offline(msg, 1);\r\n  }\r\n\r\n//  请求成功\r\nexport  function success(msg) {\r\n    Toast.success(msg, 1);\r\n  }\r\n  \r\n//请求之前拦截   //interceptors拦截器  \r\naxios.interceptors.request.use(function (config) {\r\n    // Do something before request is sent 在发送请求之前做些什么\r\n    // console.log(\"进入请求之前拦截\");\r\n     // 配置动画\r\n     loadingToast();\r\n      token=sessionStorage.token?sessionStorage.token:\"\";\r\n    //  //设置请求头\r\n      config.headers['token']=token;  \r\n      //前端 得到 token 会把这个 token (存储到sessionStorage ) 配置 请求头 里面 request.headers.token = token  \r\n\r\n     return config;\r\n  }, function (error) {\r\n    // Do something with request error  处理请求错误\r\n    offline(\"请求失败,网络异常\")\r\n    return Promise.reject(error);\r\n  });\r\n\r\n//请求之后响应拦截\r\n  axios.interceptors.response.use(function (response) {\r\n    // Do something with response data    对响应数据做些什么\r\n    // console.log(\"进入请求之后拦截\");\r\n    console.log(response);\r\n    if(response.data.code==\"3000\"){\r\n       //  router.push({name:'login',query:{active:'login'}})\r\n       history.push(\"/login\");\r\n  }\r\n     // type  不存在    success\r\n    // type = 0  fail\r\n    // type = 1  success \r\n    //设置不同请求type类型下的数据\r\n    if(!!response.data.type){\r\n      success(response.data.msg);\r\n    }else{\r\n      if(response.data.type==0){\r\n        fail(response.data.msg);\r\n      }else{\r\n        success(response.data.msg);\r\n      }\r\n      \r\n    }\r\n    return response;\r\n  }, function (error) {\r\n    // Do something with response error   //处理响应错误\r\n    fail(\"响应失败,服务异常\")\r\n    return Promise.reject(error);\r\n  });\r\n\r\n  export {axios,baseURL} //模块暴露\r\n","import \"./index.scss\";\r\n//NavBar 导航栏\r\n//头部组件 Head\r\nimport React, { Component } from \"react\";\r\n//ActionSheet 动作面板\r\n//从底部弹出的模态框，提供和当前场景相关的 2 个以上的操作动作，也支持提供标题和描述。内置固定的展示样式、不支持特别灵活的修改。\r\n//Popover气泡\r\nimport { Popover, NavBar, Icon,ActionSheet } from 'antd-mobile';\r\n\r\nimport { history } from \"&\";\r\n\r\nexport default class Head extends Component {\r\n\r\n    //自定义函数\r\n    handelGoBack(show) {\r\n        if (show) {\r\n            // history.go(-1);\r\n            history.goBack();\r\n        }\r\n\r\n    }\r\n   \r\n    //跳搜索\r\n    handelGoSearch() {\r\n        history.push(\"/search\");  //去搜索\r\n    }\r\n    render() {\r\n        const {\r\n            title,\r\n            show,\r\n            serach\r\n        } = this.props\r\n        // console.log(this.props);\r\n        // console.log(sessionStorage.token);\r\n        var tokenflage=sessionStorage.token;\r\n        // console.log(tokenflage);\r\n        // console.log(this.history);\r\n        return (\r\n            <NavBar\r\n                mode=\"light\"\r\n                className=\"navbar\"\r\n                icon={show && <Icon type=\"left\" />}\r\n                // 主要是返回\r\n                onLeftClick={() => this.handelGoBack(show)}\r\n\r\n                rightContent={[\r\n                    !serach && <Icon onClick={this.handelGoSearch.bind(this)} key=\"0\" type=\"search\" style={{ marginRight: '16px' }} />,\r\n                    !tokenflage&&<Pop scan={this.props.scan} login={this.props.login } key={1} />,\r\n                ]}\r\n            >{title}</NavBar>\r\n        )\r\n    }\r\n}\r\n\r\nconst Item = Popover.Item;\r\nconst myImg = src => <img src={`https://gw.alipayobjects.com/zos/rmsportal/${src}.svg`} className=\"am-icon am-icon-xs\" alt=\"\" />;\r\n\r\nclass Pop extends  Component {\r\n    state = {\r\n        visible: false,\r\n        selected: '',\r\n    };\r\n    handleVisibleChange=(visible)=>{\r\n        this.setState({\r\n            visible\r\n        })\r\n\r\n    }\r\n    //气泡里面选择跳转的函数\r\n    onSelect = (opt) => {\r\n        // console.log(opt.props.value);\r\n        this.setState({\r\n          visible: false,\r\n          selected: opt.props.value,\r\n        });\r\n\r\n        if(opt.props.value==\"login\"){\r\n            history.push(\"/login\");\r\n        }else if(opt.props.value==\"scan\"){\r\n            history.push(\"/scan\");\r\n        }else{\r\n            this.showActionSheet();\r\n        }\r\n    }\r\n    showActionSheet = () => {\r\n        const BUTTONS = ['拍照', '从手机相册选择', '使用相机拍照', '删除', '取消'];\r\n        ActionSheet.showActionSheetWithOptions({\r\n          options: BUTTONS,\r\n          cancelButtonIndex: BUTTONS.length - 1,\r\n          destructiveButtonIndex: BUTTONS.length - 2,\r\n          // title: 'title',\r\n          message: '请注意查看',\r\n          maskClosable: true,\r\n          'data-seed': 'logId',\r\n          wrapProps:{\r\n            onTouchStart: e => e.preventDefault(),\r\n          }\r\n        },\r\n        (buttonIndex) => {\r\n          console.log(buttonIndex)\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            scan,\r\n            login\r\n        }=this.props\r\n        return (\r\n            <Popover mask\r\n                overlayClassName=\"fortest\"\r\n                overlayStyle={{ color: 'currentColor' }}\r\n                visible={this.state.visible}\r\n                overlay={[\r\n                    // (!scan&&<Item key=\"4\" value=\"scan\" icon={myImg('tOtXhkIWzwotgGSeptou')} data-seed=\"logId\">扫一扫</Item>),\r\n                    // (<Item key=\"5\" value=\"photo\" icon={myImg('PKAgAqZWJVNwKsAJSmXd')} style={{ whiteSpace: 'nowrap' }}>拍照</Item>),\r\n                    (!login&&<Item key=\"6\" value=\"login\" icon={myImg('uQIYTFeRrjPELImDRrPt')}>\r\n                        <span style={{ marginRight: 5 }}>登录</span>\r\n                    </Item>),\r\n                ]}\r\n                align={{\r\n                    overflow: { adjustY: 0, adjustX: 0 },\r\n                    offset: [-10, 0],\r\n                }}\r\n                onVisibleChange={this.handleVisibleChange}\r\n                onSelect={this.onSelect}\r\n            >\r\n                \r\n                    <Icon type=\"ellipsis\" />\r\n               \r\n            </Popover>\r\n        )\r\n    }\r\n}\r\n","//地址增删改\r\n//引入mobx的主文件  并进行相关验证\r\nimport { observable, action, computed, } from \"mobx\";\r\n\r\nimport { axios } from \"&\";\r\nimport Item from \"antd-mobile/lib/popover/Item\";\r\n\r\nclass address {\r\n    @observable addressList = []    //地址列表\r\n\r\n    @observable defaultAddressList = {}   //默认的地址\r\n\r\n    //action执行动作  得到商品列表\r\n    @action getAddrList = async (url) => {\r\n        const res = await axios.get(url);\r\n        this.addressList = res.data.result;\r\n    }\r\n    //得到一个默认地址\r\n    @action getDefaultAddrList = async (url) => {\r\n        const res = await axios.get(url);\r\n        console.log(res.data.result);\r\n        // console.log(res.data.result.addresobj.checked);\r\n        this.defaultAddressList = res.data.result;\r\n    }\r\n    //修改地址\r\n    //新增地址\r\n    //删除地址\r\n    // @action  deleteOneAddr=()=>{\r\n    //     axios.post(\"/react/deleteoneaddress\").then(res=>{\r\n    //         this.addressList=this.addressList.filter(item=>item._id);\r\n    //     })\r\n    // }\r\n\r\n    @action deleteOneAddr = (mobile, id) => {\r\n        axios.post(\"/react/deleteoneaddress\", {\r\n            mobile,\r\n            id\r\n        }).then(res => {\r\n            console.log(res);\r\n        })\r\n    }\r\n\r\n    //设置默认地址  选中弹框后就是默认地址\r\n    @action setDefaultAddre = (mobile, id, checked) => {\r\n        axios.post(\"/react/defaultChecked\", {\r\n            mobile,\r\n            id,\r\n            checked\r\n        }).then(res => {\r\n            // this.addressList=this.addressList.map((item)=>{\r\n            //     // if(item._id==id){\r\n            //     //     console.log(\"999\")\r\n            //     //     item.checked=true\r\n            //     //     // return item.checked;\r\n            //     // }else{\r\n            //     //     console.log(\"888\");\r\n            //     //     item.checked=false\r\n            //     // }\r\n            //     // return item\r\n\r\n\r\n            // })  \r\n            this.addressList = res.data.result\r\n        })\r\n    }\r\n    //原来的\r\n    // @action setDefaultAddre =(mobile,id)=>{\r\n    //     axios.post(\"/react/defaultChecked\",{\r\n    //         mobile,\r\n    //         id\r\n    //     }).then(res=>{\r\n    //         this.addressList=this.addressList.map((item)=>{\r\n    //             if(item._id==id){\r\n    //                 item.checked=true\r\n    //             }else{\r\n    //                 item.checked=false\r\n    //             }\r\n    //             return item;\r\n    //         })  \r\n    //     })\r\n    // }\r\n    //取消设置默认地址\r\n    @action calcelDefault = (mobile, id, checked) => {\r\n        axios.post(\"/react/canceldefault\", {\r\n            mobile,\r\n            id,\r\n            checked\r\n        }).then(res => {\r\n            this.addressList = this.addressList.map((item) => {\r\n                if (item._id == id) {\r\n                    if (checked === true) {\r\n                        item.checked = false;\r\n                    } else {\r\n                        item.checked = true;\r\n                    }\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n    }\r\n    //修改地址\r\n    // @action modifyaddress = (mobile, id, province, town, district, specific) => {\r\n    //     axios.post(\"/react/modifyaddress\", {\r\n    //         mobile,\r\n    //         id,\r\n    //         province,\r\n    //         town,\r\n    //         district,\r\n    //         specific\r\n    //     }).then(res => {\r\n    //         console.log(res);\r\n    //     })\r\n    // }\r\n\r\n    @action modifyaddress = (mobile, id, addresobj) => {\r\n        axios.post(\"/react/modifyaddress\", {\r\n            mobile,\r\n            id,\r\n            addresobj\r\n           \r\n        }).then(res => {\r\n            console.log(res);\r\n        })\r\n    }\r\n    //数据监听\r\n    // @computed  \r\n}\r\n\r\n\r\nexport default new address();   //"],"sourceRoot":""}