{"version":3,"sources":["scripts/views/login/index.js","utils/index.js","utils/axios.js","scripts/components/head/index.js","scripts/actions/index.js"],"names":["mobileReg","codeReg","timer","Login","connect","props","handleCheckMobile","mobile","console","log","code","state","value","toggle","setState","codeFlag","test","loginFlag","handleCheckCode","star","count","txt","clearInterval","computedTime","setInterval","handleSendCode","axios","post","then","res","handleSumbit","data","type","sessionStorage","token","history","push","dispatch","changeUser","this","title","show","marqueeProps","loop","style","padding","placeholder","clear","ref","el","onChange","inline","className","backgroundColor","color","disabled","onClick","Component","createHashHistory","baseURL","fail","msg","hide","success","defaults","headers","common","interceptors","request","use","config","time","loading","error","offline","Promise","reject","response","Head","goBack","serach","tokenflage","mode","icon","onLeftClick","handelGoBack","rightContent","handelGoSearch","bind","key","marginRight","Pop","scan","login","Item","visible","selected","handleVisibleChange","onSelect","opt","showActionSheet","BUTTONS","showActionSheetWithOptions","options","cancelButtonIndex","length","destructiveButtonIndex","message","maskClosable","wrapProps","onTouchStart","e","preventDefault","buttonIndex","src","mask","overlayClassName","overlayStyle","overlay","alt","align","overflow","adjustY","adjustX","offset","onVisibleChange","getBanner","a","async","url","cb","get","payload","result","getMobile","getMiddleBanner","getBrandbanner","getSmallbanner","getNoticebar","getIndexList","getGoodsType","params","getGoodsList","getSearchDetail","ChangeGoodListReverse","ChangeIndexListReverse","ChangeSerchListReverse"],"mappings":"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","file":"static/js/25.d0996570.chunk.js","sourcesContent":["import \"./index.scss\";\r\nimport React, { Component } from \"react\";\r\n// import React from \"react\";\r\nimport { Button, WhiteSpace, NoticeBar, WingBlank, List, InputItem } from 'antd-mobile';\r\n//InputItem 文本输入\r\n//用于接受单行文本。\r\nimport Head from \"~/components/head\";\r\nimport {connect} from \"react-redux\"\r\n//引入axios\r\nimport { axios } from \"&\";\r\nimport { changeUser } from \"../../actions\";\r\nexport const mobileReg = /^1(3|4|5|6|7|8|9)\\d{9}$/; //手机号正则\r\nexport const codeReg = /^\\d{4}$/;    //验证码正则\r\n\r\nlet timer = null;  //默认定时器\r\n@connect()\r\nclass Login extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            codeFlag: false,\r\n            loginFlag: false,//默认可以点击\r\n            // count: 60,   //倒计时功能\r\n            count:10800,\r\n            toggle: true,  //总开关\r\n            txt: \"发送验证码\"\r\n\r\n        }\r\n    }\r\n    //手机号正则\r\n    handleCheckMobile = (mobile) => {\r\n        console.log(mobile); //拿到具体的input框里面的值\r\n        var code = this.code.state.value;\r\n        if (this.state.toggle) {\r\n            this.setState({\r\n                codeFlag: mobileReg.test(mobile),  //手机号满足\r\n                loginFlag: mobileReg.test(mobile) && codeReg.test(code)  //同时满足\r\n            })\r\n        }\r\n    }\r\n    //验证码正则判断\r\n    handleCheckCode = (code) => {\r\n        console.log(code);\r\n        var mobile = this.mobile.state.value;\r\n        console.log(mobile);\r\n        this.setState({\r\n            loginFlag: mobileReg.test(mobile) && codeReg.test(code)  //同时满足\r\n        })\r\n    }\r\n\r\n    //定时器功能\r\n    //发送验证码\r\n    //执行定时器\r\n    star = () => {\r\n        if (this.state.count > 1) {\r\n            this.setState({\r\n                count: --this.state.count,\r\n                txt: `还有${this.state.count}S`,\r\n                codeFlag: false,\r\n                toggle: false\r\n            })\r\n        } else {\r\n            //定时器置空\r\n            clearInterval(timer);\r\n            timer = null;\r\n            this.setState({\r\n                count: 60,\r\n                txt: \"发送验证码\",\r\n                codeFlag: true,\r\n                toggle: true\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    //计算时间\r\n    computedTime = () => {\r\n        this.star();\r\n        timer = setInterval(this.star, 1000);\r\n    }\r\n    //点击执行  发送验证码   并倒计时\r\n    handleSendCode = () => {\r\n        //执行时间定时器\r\n        this.computedTime();\r\n        console.log(this.mobile.state.value);\r\n        axios.post(\"/react/aly/sendCode\", {\r\n            mobile: this.mobile.state.value\r\n        }).then(res => {\r\n            console.log(res);\r\n        })\r\n    }\r\n    //接收验证码后效验  效验成功后跳我的主页\r\n    handleSumbit = () => {\r\n        axios.post(\"react/aly/checkCode\", {\r\n            mobile: this.mobile.state.value,\r\n            code: this.code.state.value\r\n\r\n        }).then(res => {\r\n            if (!!res.data.type) {\r\n                sessionStorage.token = res.data.token;\r\n                sessionStorage.mobile = this.mobile.state.value;\r\n                //跳我的页面\r\n                this.props.history.push(\"/main/mine\");\r\n                clearInterval(timer);  //修改bug\r\n                timer = null;\r\n                this.props.dispatch(changeUser({\r\n                    token :res.data.token\r\n                }))\r\n\r\n            } else {\r\n                sessionStorage.token = \"\";\r\n                sessionStorage.mobile = \"\";\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            codeFlag,\r\n            loginFlag,\r\n            txt\r\n\r\n        } = this.state\r\n        const {\r\n            mobile\r\n        }=this.props\r\n        console.log(this.props.mobile);\r\n\r\n        return (\r\n            <div>\r\n                <Head title=\"登录\" show={true}></Head>\r\n\r\n                <NoticeBar marqueeProps={{ loop: true, style: { padding: '0 7.5px' } }}>\r\n                    请输入手机号完成填写验证码登录...  请输入手机号完成填写验证码登录...\r\n                </NoticeBar>\r\n\r\n\r\n                <WingBlank>\r\n                    <List>\r\n                        <WhiteSpace />\r\n                        <InputItem\r\n                            type=\"tel\"\r\n                            placeholder=\"请输入手机号...\"\r\n                            clear\r\n                            ref={el => this.mobile = el}\r\n                            onChange={this.handleCheckMobile}\r\n\r\n                        >手机号码\r\n                            </InputItem>\r\n                        <WhiteSpace />\r\n                        <InputItem\r\n                            type=\"number\"\r\n                            placeholder=\"请输入验证码...\"\r\n                            ref={el => this.code = el}\r\n\r\n                            onChange={this.handleCheckCode}\r\n\r\n                        >验证码</InputItem>\r\n                        <Button type=\"warning\"\r\n                            inline className=\"left-btn\"\r\n                            style={{backgroundColor:\"#FFFF66\",color:\"#003366\"}}\r\n\r\n                            disabled={!codeFlag}\r\n                            onClick={this.handleSendCode}\r\n                        >{txt}</Button>\r\n                        <Button type=\"primary\"\r\n                         style={{backgroundColor:\"#CC0033\",color:\"#CCCC00\"}}\r\n                            disabled={!loginFlag}\r\n                            onClick={this.handleSumbit}\r\n                        >立即登陆</Button>\r\n                        <WhiteSpace />\r\n                    </List>\r\n                </WingBlank>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Login","// es6  一个模块暴露多个接口\r\nimport url from \"url\";\r\n\r\nimport {createHashHistory} from \"history\";\r\n//再次暴露\r\n// export {msg} from \"./msg\";\r\n\r\nexport {config} from \"./config\";\r\n\r\n\r\n\r\nexport const commonCss={\r\n    init:{\r\n        padding:0,\r\n        margin:0\r\n    },\r\n    init1:{\r\n        color:\"red\",\r\n        boxShadow:\"1px 2px 3px 4px green\"\r\n    }\r\n}\r\n\r\nexport const commonEvent={\r\n    move(){\r\n    console.log(\"这是鼠标移动事件\")\r\n    },\r\n    touch(){\r\n        console.log(\"这是touch事件\")\r\n    }\r\n}\r\n\r\nexport {axios,baseURL} from \"./axios\";\r\n\r\n\r\n\r\nexport function getQuery(search){\r\n\r\n    return url.parse(search,true).query\r\n\r\n}\r\n//下面一句话相当于   history =this.PaymentResponse.history\r\nexport const history =new createHashHistory();\r\n\r\n","import axios from \"axios\";\r\nimport  {Toast} from 'antd-mobile';\r\nimport  {history}  from \"&\";\r\n// const baseURL=\"http://localhost:4321/\"; \r\n// const baseURL=\"http://47.105.44.9:4321/\"; \r\nconst baseURL=\"https://huyulin.top:4321/\"; \r\n\r\nlet token=\"\"\r\n// const baseURL=\"http://47.105.44.9:1234/\";   //http://localhost:1234/vue/movie\r\n// axios.defaults.baseURL = 'https://api.example.com';  //设置基路径\r\n axios.defaults.baseURL=baseURL;\r\n axios.defaults.headers.common['token'] =token;   //设置token AUTH_TOKEN  将token设置到请求头\r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';//将键值对的参数用&连接起来，如果有空格，将空格转换为+加号；有特殊符号，将特殊符号转换为ASCII HEX值\r\n\r\nexport  function loadingToast(msg,time) {\r\n    msg=msg||\"正在请求\";\r\n    time=time||1;\r\n    Toast.hide();  //先清空\r\n    Toast.loading(msg, time, () => {\r\n        // console.log('加载完成 !!!');\r\n      });\r\n  }\r\n\r\n//失败\r\n export function fail(msg) {\r\n    Toast.hide();  //先清空\r\n    Toast.fail(msg, 1);\r\n  } \r\n//网络原因\r\n  export function offline(msg) {\r\n    Toast.offline(msg, 1);\r\n  }\r\n\r\n//  请求成功\r\nexport  function success(msg) {\r\n    Toast.success(msg, 1);\r\n  }\r\n  \r\n//请求之前拦截   //interceptors拦截器  \r\naxios.interceptors.request.use(function (config) {\r\n    // Do something before request is sent 在发送请求之前做些什么\r\n    // console.log(\"进入请求之前拦截\");\r\n     // 配置动画\r\n     loadingToast();\r\n      token=sessionStorage.token?sessionStorage.token:\"\";\r\n    //  //设置请求头\r\n      config.headers['token']=token;  \r\n      //前端 得到 token 会把这个 token (存储到sessionStorage ) 配置 请求头 里面 request.headers.token = token  \r\n\r\n     return config;\r\n  }, function (error) {\r\n    // Do something with request error  处理请求错误\r\n    offline(\"请求失败,网络异常\")\r\n    return Promise.reject(error);\r\n  });\r\n\r\n//请求之后响应拦截\r\n  axios.interceptors.response.use(function (response) {\r\n    // Do something with response data    对响应数据做些什么\r\n    // console.log(\"进入请求之后拦截\");\r\n    console.log(response);\r\n    if(response.data.code==\"3000\"){\r\n       //  router.push({name:'login',query:{active:'login'}})\r\n       history.push(\"/login\");\r\n  }\r\n     // type  不存在    success\r\n    // type = 0  fail\r\n    // type = 1  success \r\n    //设置不同请求type类型下的数据\r\n    if(!!response.data.type){\r\n      success(response.data.msg);\r\n    }else{\r\n      if(response.data.type==0){\r\n        fail(response.data.msg);\r\n      }else{\r\n        success(response.data.msg);\r\n      }\r\n      \r\n    }\r\n    return response;\r\n  }, function (error) {\r\n    // Do something with response error   //处理响应错误\r\n    fail(\"响应失败,服务异常\")\r\n    return Promise.reject(error);\r\n  });\r\n\r\n  export {axios,baseURL} //模块暴露\r\n","import \"./index.scss\";\r\n//NavBar 导航栏\r\n//头部组件 Head\r\nimport React, { Component } from \"react\";\r\n//ActionSheet 动作面板\r\n//从底部弹出的模态框，提供和当前场景相关的 2 个以上的操作动作，也支持提供标题和描述。内置固定的展示样式、不支持特别灵活的修改。\r\n//Popover气泡\r\nimport { Popover, NavBar, Icon,ActionSheet } from 'antd-mobile';\r\n\r\nimport { history } from \"&\";\r\n\r\nexport default class Head extends Component {\r\n\r\n    //自定义函数\r\n    handelGoBack(show) {\r\n        if (show) {\r\n            // history.go(-1);\r\n            history.goBack();\r\n        }\r\n\r\n    }\r\n   \r\n    //跳搜索\r\n    handelGoSearch() {\r\n        history.push(\"/search\");  //去搜索\r\n    }\r\n    render() {\r\n        const {\r\n            title,\r\n            show,\r\n            serach\r\n        } = this.props\r\n        // console.log(this.props);\r\n        // console.log(sessionStorage.token);\r\n        var tokenflage=sessionStorage.token;\r\n        // console.log(tokenflage);\r\n        // console.log(this.history);\r\n        return (\r\n            <NavBar\r\n                mode=\"light\"\r\n                className=\"navbar\"\r\n                icon={show && <Icon type=\"left\" />}\r\n                // 主要是返回\r\n                onLeftClick={() => this.handelGoBack(show)}\r\n\r\n                rightContent={[\r\n                    !serach && <Icon onClick={this.handelGoSearch.bind(this)} key=\"0\" type=\"search\" style={{ marginRight: '16px' }} />,\r\n                    !tokenflage&&<Pop scan={this.props.scan} login={this.props.login } key={1} />,\r\n                ]}\r\n            >{title}</NavBar>\r\n        )\r\n    }\r\n}\r\n\r\nconst Item = Popover.Item;\r\nconst myImg = src => <img src={`https://gw.alipayobjects.com/zos/rmsportal/${src}.svg`} className=\"am-icon am-icon-xs\" alt=\"\" />;\r\n\r\nclass Pop extends  Component {\r\n    state = {\r\n        visible: false,\r\n        selected: '',\r\n    };\r\n    handleVisibleChange=(visible)=>{\r\n        this.setState({\r\n            visible\r\n        })\r\n\r\n    }\r\n    //气泡里面选择跳转的函数\r\n    onSelect = (opt) => {\r\n        // console.log(opt.props.value);\r\n        this.setState({\r\n          visible: false,\r\n          selected: opt.props.value,\r\n        });\r\n\r\n        if(opt.props.value==\"login\"){\r\n            history.push(\"/login\");\r\n        }else if(opt.props.value==\"scan\"){\r\n            history.push(\"/scan\");\r\n        }else{\r\n            this.showActionSheet();\r\n        }\r\n    }\r\n    showActionSheet = () => {\r\n        const BUTTONS = ['拍照', '从手机相册选择', '使用相机拍照', '删除', '取消'];\r\n        ActionSheet.showActionSheetWithOptions({\r\n          options: BUTTONS,\r\n          cancelButtonIndex: BUTTONS.length - 1,\r\n          destructiveButtonIndex: BUTTONS.length - 2,\r\n          // title: 'title',\r\n          message: '请注意查看',\r\n          maskClosable: true,\r\n          'data-seed': 'logId',\r\n          wrapProps:{\r\n            onTouchStart: e => e.preventDefault(),\r\n          }\r\n        },\r\n        (buttonIndex) => {\r\n          console.log(buttonIndex)\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            scan,\r\n            login\r\n        }=this.props\r\n        return (\r\n            <Popover mask\r\n                overlayClassName=\"fortest\"\r\n                overlayStyle={{ color: 'currentColor' }}\r\n                visible={this.state.visible}\r\n                overlay={[\r\n                    // (!scan&&<Item key=\"4\" value=\"scan\" icon={myImg('tOtXhkIWzwotgGSeptou')} data-seed=\"logId\">扫一扫</Item>),\r\n                    // (<Item key=\"5\" value=\"photo\" icon={myImg('PKAgAqZWJVNwKsAJSmXd')} style={{ whiteSpace: 'nowrap' }}>拍照</Item>),\r\n                    (!login&&<Item key=\"6\" value=\"login\" icon={myImg('uQIYTFeRrjPELImDRrPt')}>\r\n                        <span style={{ marginRight: 5 }}>登录</span>\r\n                    </Item>),\r\n                ]}\r\n                align={{\r\n                    overflow: { adjustY: 0, adjustX: 0 },\r\n                    offset: [-10, 0],\r\n                }}\r\n                onVisibleChange={this.handleVisibleChange}\r\n                onSelect={this.onSelect}\r\n            >\r\n                \r\n                    <Icon type=\"ellipsis\" />\r\n               \r\n            </Popover>\r\n        )\r\n    }\r\n}\r\n","import {axios} from \"&\";\r\n\r\n\r\n//得到首页轮播图的异步数据\r\nexport async function getBanner({url,cb}){\r\n    const res= await axios.get(url)\r\n    return{\r\n        type:\"getBanner\",\r\n        payload:res.data.result\r\n    }\r\n} \r\n//得到手机号\r\nexport async function getMobile({url}){\r\n    const res= await axios.post(url)\r\n    return{\r\n        type:\"changeUser\",\r\n        payload:{\r\n          mobile:  res.data.result\r\n        }\r\n    }\r\n} \r\n//得到用户的数据\r\nexport  const changeUser=(payload)=>{\r\n      return{\r\n          type:\"changeUser\",\r\n          payload\r\n      }\r\n}\r\n//得到首页中间轮播图的异步数据\r\nexport async function getMiddleBanner({url,cb}){\r\n    const res= await axios.get(url)\r\n    return{\r\n        type:\"getMiddleBanner\",\r\n        payload:res.data.result\r\n    }\r\n} \r\n//获取品牌热卖图标\r\nexport async function getBrandbanner({url,cb}){\r\n    const res=await axios.get(url);\r\n\r\n    return {\r\n        type:\"getBrandbanner\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n//获取中间小图标\r\nexport async function getSmallbanner({url,cb}){\r\n    const res =await axios.get(url);\r\n    return {\r\n        type:\"getSmallbanner\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n//获取noticebar\r\nexport async function getNoticebar({url,cb}){\r\n    const res =await axios.get(url);\r\n    return {\r\n        type:\"getNoticebar\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n//获取首页列表  http://localhost:4321/react/home/indexlist\r\nexport async function getIndexList({url,cb}){\r\n    const res =await axios.get(url);\r\n    return {\r\n        type:\"getIndexList\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n//获取首页列表的详情页\r\nexport async function getIndexDetail({url,params}){\r\n    const res =await axios.get(url,{params});\r\n    return {\r\n        type:\"getIndexDetail\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\n//商品类型\r\nexport async function getGoodsType({url,params}){\r\n    const res =await axios.get(url,{params});\r\n    return {\r\n        type:\"getGoodsType\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n//商品列表\r\nexport async function getGoodsList({url,params}){\r\n    const res =await axios.get(url,{params});\r\n    return {\r\n        type:\"getGoodsList\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\n//得到列表页的详情\r\nexport async function getListDetail({url,params}){\r\n    const res =await axios.get(url,{params});\r\n    return {\r\n        type:\"getListDetail\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n//根据长标题短标题以及描述拿到搜索结果\r\nexport async function getSearchDetail({url,params}){\r\n    const res =await axios.get(url,{params});\r\n    // console.log(params);\r\n    return{\r\n        type:\"getSearchDetail\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\n//点击按钮加入购物车\r\n\r\nexport async function addShoppingCar({url,params}){\r\n    const res =await axios.get(url,{params});\r\n    console.log(params);\r\n    return {\r\n        type:\"addShoppingCar\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\n//显示购物车商品信息\r\nexport async function showShoppingCarInfo({url,params}){\r\n    const res=await axios.get(url,{params});\r\n    console.log(params);\r\n\r\n    return {\r\n        type:\"showShoppingCarInfo\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\n//反转商品列表页数据实现下拉刷新\r\nexport  function ChangeGoodListReverse(){\r\n     return {\r\n         type:\"ChangeGoodListReverse\"\r\n     }\r\n}\r\n//反转数据结构实现首页的列表页下拉刷新\r\nexport function ChangeIndexListReverse(){\r\n    return {\r\n        type:\"ChangeIndexListReverse\"\r\n    }\r\n}\r\n//反转搜索列表页的数据结构实现前端页面的前端刷新\r\nexport function ChangeSerchListReverse(){\r\n    return {\r\n        type:\"ChangeSerchListReverse\"\r\n    }\r\n}\r\n\r\n"],"sourceRoot":""}